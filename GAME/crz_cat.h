short doom[] = {82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 185, 9, 147, 9, 123, 9, 220, 9, 185, 9, 123, 9, 147, 9, 185, 9, 220, 9, 185, 9, 147, 9, 123, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 247, 9, 196, 9, 165, 9, 196, 9, 247, 9, 330, 9, 196, 9, 247, 9, 330, 9, 247, 9, 392, 9, 494, 9, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 13, 110, 13, 110, 13, 165, 13, 175, 13, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 79, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 13, 110, 13, 110, 13, 165, 13, 175, 13, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 220, 9, 175, 9, 147, 9, 220, 9, 175, 9, 147, 9, 262, 9, 220, 9, 175, 9, 220, 9, 175, 9, 147, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 139, 13, 139, 13, 277, 13, 139, 13, 139, 13, 247, 13, 139, 13, 139, 13, 220, 13, 139, 13, 139, 13, 196, 13, 139, 13, 139, 13, 208, 13, 220, 13, 123, 13, 123, 13, 247, 13, 123, 13, 123, 13, 220, 13, 123, 13, 123, 13, 196, 13, 123, 13, 123, 13, 175, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 247, 9, 196, 9, 165, 9, 196, 9, 247, 9, 330, 9, 196, 9, 247, 9, 330, 9, 247, 9, 392, 9, 494, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 185, 9, 156, 9, 123, 9, 185, 9, 156, 9, 123, 9, 196, 9, 147, 9, 123, 9, 311, 9, 156, 9, 123, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 330, 9, 247, 9, 196, 9, 392, 9, 330, 9, 196, 9, 247, 9, 294, 9, 330, 9, 392, 9, 330, 9, 196, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 13, 110, 13, 110, 13, 165, 13, 175, 13, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 220, 9, 175, 9, 147, 9, 220, 9, 175, 9, 147, 9, 262, 9, 220, 9, 175, 9, 220, 9, 175, 9, 147, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 247, 9, 196, 9, 165, 9, 123, 9, 165, 9, 196, 9, 262, 9, 247, 9, 196, 9, 247, 9, 196, 9, 165, 9, NEXT_PLAY};
short doom2[] = {82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 185, 9, 147, 9, 123, 9, 220, 9, 185, 9, 123, 9, 147, 9, 185, 9, 220, 9, 185, 9, 147, 9, 123, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 247, 9, 196, 9, 165, 9, 196, 9, 247, 9, 330, 9, 196, 9, 247, 9, 330, 9, 247, 9, 392, 9, 494, 9, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 13, 110, 13, 110, 13, 165, 13, 175, 13, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 79, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 13, 110, 13, 110, 13, 165, 13, 175, 13, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 220, 9, 175, 9, 147, 9, 220, 9, 175, 9, 147, 9, 262, 9, 220, 9, 175, 9, 220, 9, 175, 9, 147, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 139, 13, 139, 13, 277, 13, 139, 13, 139, 13, 247, 13, 139, 13, 139, 13, 220, 13, 139, 13, 139, 13, 196, 13, 139, 13, 139, 13, 208, 13, 220, 13, 123, 13, 123, 13, 247, 13, 123, 13, 123, 13, 220, 13, 123, 13, 123, 13, 196, 13, 123, 13, 123, 13, 175, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 247, 9, 196, 9, 165, 9, 196, 9, 247, 9, 330, 9, 196, 9, 247, 9, 330, 9, 247, 9, 392, 9, 494, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 185, 9, 156, 9, 123, 9, 185, 9, 156, 9, 123, 9, 196, 9, 147, 9, 123, 9, 311, 9, 156, 9, 123, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 330, 9, 247, 9, 196, 9, 392, 9, 330, 9, 196, 9, 247, 9, 294, 9, 330, 9, 392, 9, 330, 9, 196, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 175, 13, 110, 13, 110, 13, 156, 13, 110, 13, 110, 13, 165, 13, 175, 13, 110, 13, 110, 13, 220, 13, 110, 13, 110, 13, 196, 13, 110, 13, 110, 13, 220, 9, 175, 9, 147, 9, 220, 9, 175, 9, 147, 9, 262, 9, 220, 9, 175, 9, 220, 9, 175, 9, 147, 9, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 79, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 131, 13, 82, 13, 82, 13, 117, 13, 82, 13, 82, 13, 123, 13, 131, 13, 82, 13, 82, 13, 165, 13, 82, 13, 82, 13, 147, 13, 82, 13, 82, 13, 247, 9, 196, 9, 165, 9, 123, 9, 165, 9, 196, 9, 262, 9, 247, 9, 196, 9, 247, 9, 196, 9, 165, 9, NEXT_PLAY};
unsigned short fly_l[] = {18, 19, 20, 21, 22, 23, 24, 25};
unsigned short death[] = {26, 27, 28, 29, 30};
short* mus[] = {doom, doom2};

void bird(ENTITY far* ent) {
	if (ent->sprite_indexes == death && ent->cur_sprite == 0)
		ent->hp = 0;
	else if (ent->x >= 300 && ent->sprite_indexes != death) {
		ent->x = 293;
		ent->spr_cnt = sizeof(death) >> 1;
		ent->sprite_indexes = death;
		ent->cur_sprite = 0;
		ent->sx = 0;
	} else if (ent->sprite_indexes != death) {
		ent->sx++;
	}
}

void stop() {
	unsigned char key = inp(0x60);
	if (key == 0x81)
		on_game = 0;
}


setup() {
	init_display("res.pkg");
	
	create_entity(10, 20, 4, 0, fly_l, sizeof(fly_l) >> 1, bird);
	
	keyb_add_subscriber(stop);
	
	M_play(mus, 2);
}

loop() {
	
}
